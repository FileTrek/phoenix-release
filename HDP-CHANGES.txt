HDP-2.6 is based on Apache Phoenix 4.7.0-HBase-1.1

Following are the changes on top of Apache Phoenix 4.7.0-HBase-1.1

a40b07e PHOENIX-3708 Tests introduced in PHOENIX-3346 doesn't work well with failsafe plugin
3148ef7 PHOENIX-3662 PhoenixStorageHandler throws ClassCastException (by Jeongdae Kim)
ab48a0b PHOENIX-3346 Hive PhoenixStorageHandler doesn't work well with column
bdf1ba9 PHOENIX-3512 PhoenixStorageHandler makes erroneous query string when handling between clauses with date constants.
9af802f PHOENIX-3490 PhoenixStorageHandler doesn't handler hbase configuration properly and don't work in secured env
1ac420b PHOENIX-3698 No-args constructor for IndexedWALEditCodec
4821304 BUG-76127, PHOENIX-3652 User requires all Create privilege on 'default' namespace (Ankit Singhal)
d7ea44e PHOENIX-3686 Allow client-authentication to be disabled for PQS
2cfacf5 BUG-75843 PHOENIX-3694 Drop schema does not invalidate schema from the server cache
83f9bfc PHOENIX-3684 Handle _HOST in principal specified in JDBC url
a23a975 PHOENIX-3199 ServerCacheClient sends cache to all regions unnecessarily (chenglei)
053d66d PHOENIX-2900 Unable to find hash cache once a salted table 's first region has split (chenglei)
1e9e07f PHOENIX-1754 Try to handle keytab paths on Windows filesystems
c5b95d5 PHOENIX-3503 PhoenixStorageHandler doesn't work properly when execution engine of Hive is Tez.
2300a64 PHOENIX-3486 RoundRobinResultIterator doesn't work correctly because of setting Scan's cache size inappropriately in PhoenixInputForamt
c08e974 PHOENIX-3189 Perform Kerberos login before ConnectionInfo is constructed
458c405 PHOENIX-3164 Cache UGI instances for remote users in PQS
86d4a11 PHOENIX-3126 Tie a driver instance to a specific user (Prabhjyot Singh)
a1245fb Technology Preview for RepairTool
93fbe6a PHOENIX-3521 Scan over local index may return incorrect result after flush & compaction
1f5258e PHOENIX-117 Phoenix is failing to establish connection on secure envs with NoClassDefFoundError
85ff5ce BUG-58753 Force the Phoenix ServerRpcControllerFactory class inside the Phoenix Indexer (Rajeshbabu)
fb13d36 PHOENIX-118 Remove very chatty logging and add notification around cache evictions
6e42a0b BUG-70081 SCA : SQL Injection (Input Validation and Representation, Data Flow)(Rajeshbabu)
e3f0fde BUG-72886 PHOENIX-3610 Fix tableName used to get the index maintainers while creating HalfStoreFileReader for local index store
c61328d BUG-69699 PHOENIX-3549 PHOENIX-3134 Ingestion of VARBINARY data should fail when data is not base64-encoded varbinary fields bulk load difference between MR/psql and upserts
2134cbc PHOENIX-2930 Cannot resolve columns aliased to its own name
1ab4b39 PHOENIX-3608 KeyRange interset should return EMPTY_RANGE when one of it is NULL_RANGE(Rajeshbabu)
6820870 BUG-71951 PHOENIX-3271 Distribute UPSERT SELECT across cluster
ac278fb BUG-67084 PHOENIX-3609 Detect and fix corrupted local index region during compaction
b2590d7 PHOENIX-2935 IndexMetaData cache can expire when a delete and or query running on server
ee4b5dc BUG-59512 BUG-59510 PHOENIX-2890 Extend IndexTool to allow incremental index rebuilds
d43ddef PHOENIX-3423 PhoenixObjectInspector doesn't have information on length of the column.
bd9b836 PHOENIX-3422 PhoenixQueryBuilder doesn't make value string correctly for char(/varchar) column type.
7d51f80 PHOENIX-3386 PhoenixStorageHandler throws NPE if local tasks executed via child
b924a4d PHOENIX-3408 arithmetic/mathematical operations with Decimal columns failed in Hive with PheonixStorageHandler.
7af8984 PHOENIX-3416 Memory leak in PhoenixStorageHandler
15c78b8 PHOENIX-3387 Hive PhoenixStorageHandler fails with join on numeric fields
15e326e PHOENIX-3078. Hive storage handler does not work if phoenix.table.name contains the schema name
2358f2c PHOENIX-3565 Set failIfNoTests=false on surefire and failsafe
dbd5936 PHOENIX-3280 Automatic attempt to rebuild all disabled index(James Taylor)
6050ccf BUG-70567 PHOENIX-3544 Fix UNSIGNED_DATE and UNSIGNED_TIME type in phoenix-spark
d0ed361 HBASE-17292 Add observer notification before bulk loaded hfile is moved to region directory
9d4dcbf PHOENIX-3246 Treat U+2002 as whitespace in parser
e9e9eec PHOENIX-3540 BUG-70567 Fix Time data type in Phoenix Spark integration
a5d03d6 PHOENIX-2784 phoenix-spark: Allow coercion of DATE fields to TIMESTAMP when loading DataFrames(Josh Mahonin)
4f7a62b PHOENIX-3499 Enable null value for quote character for CSVBulkLoad tool
be516a2 BUG-67085 Fix Issues with splits/merges during bulkload/index rebuilding mr job when the table has local indexes
fe6ad4c HBASE-17123 Add postBulkLoadHFile variant that notifies the final paths
f68e4e0 PHOENIX-3504 Spark integration doesn't work with decimal columns that are using default precision
eec49f3 PHOENIX-930 duplicated columns cause query exception and drop table exception (Junegunn Choi, Kalyan Hadoop)
ffc4153 BUG-67764 PHOENIX-3161 Improve performance of automatic index rebuilding
298dfce PHOENIX-3004 Allow configuration in hbase-site to define realms other than the server's
d616f28 BUG-70219 Add in a definition for the HWX internal nexus repo
d7621ea PHOENIX-3505 Avoid NPE on close() in OrderedResultIterator
f2c2d4f PHOENIX-3241 Support both DATE and TIMESTAMP in CONVERT_TZ()
73f0018 PHOENIX-86 UDF testing in phoenix is failing with NoSuchMethodError
82ba256 PHOENIX-3236 Problem with shading apache commons on Azure.
a261ee8 PHOENIX-3223 Add `hadoop classpath` to PQS classpath when available
201ac2c BUG-80929 Few Phoenix UT fails to load fsimage
------------
e857af8 PHOENIX-3015 Any metadata changes may cause unpredictable result when local indexes are using
8a87fb9 PHOENIX-2845 Timestamp ignores nanos in literal expressions
30f1b84 PHOENIX-2743 HivePhoenixHandler for big-big join with predicate push down
0378b69 PHOENIX-2817 Phoenix-Spark plugin doesn't work in secured env
15b9159 PHOENIX-1523 Make it easy to provide a tab literal as separator for CSV imports
6bf0d95 PHOENIX-2940 Query the stats table and cache stats in the client
c2f347a PHOENIX-3057 Set incremental=false for sqlline-thin
fba9973 PHOENIX-3013 TO_CHAR fails to handle indexed null value (Junegunn Choi)
787f375 PHOENIX-3014 SELECT DISTINCT pk ORDER BY pk DESC gives the wrong results with salted tables.
5584107 PHOENIX-3011 Fix missing apache licenses
c455110 PHOENIX-3008 Prevent upgrade of existing multi-tenant table to map to namespace until we support it correctly
8a03757 PHOENIX-2952 Addendum to fix test case failure (Ram)
4531353 PHOENIX-2952 array_length return negative value (Joseph Sun)
883c06b PHOENIX-3006 Fix all ScalarFunctions to implement clone(List) or <init>(List). (James Taylor & Lars Hofhansl)
51a42ce PHOENIX-2276 Fix test failure
814e02b PHOENIX-2276 Addednum2 to fix test failures
af1ec68 PHOENIX-2276 addendum for fixing test failures
e0f3ac7 PHOENIX-2276 Creating index on a global view on a multi-tenant table fails with NPE
f38e202 PHOENIX-2920 Incorrect Queries on Multi-tenant tables with WHERE clause containing Row Value Constructor
ae8905a PHOENIX-2994 Coalesce function may return null
a318852 PHOENIX-2961 select on a composite primary key fails when DESC is set in the table
aabd269 PHOENIX-2983 ClassCastException on auto coerce of BIGINT to DECIMAL
f76f3ff PHOENIX-2934 Checking a coerce expression at top level should not be necessary for Union All query (Alicia Ying Shu)
001f642 PHOENIX-2886 Union ALL with Char column not present in the table in Query 1 but in Query 2 throw exception (Alicia Ying Shu)
24f5f4a PHOENIX-2942 Order by incorrect for RVC
0f4d213 PHOENIX-2898 HTable not closed in ConnectionQueryServicesImpl (Alex Araujo)
d507ea8 PHOENIX-2919 PreparedStatement Returns Incorrect Number of Deleted Records
4acca9e PHOENIX-2936 Missing antlr runtime on server side after PHOENIX-2908
4b613cc PHOENIX-2912 Broken IT tests after PHOENIX-2905
84526bf PHOENIX-2894 Sort-merge join works incorrectly with DESC columns
ebfe04f PHOENIX-2908 phoenix-core depends on both antlr 3.5 and antlr 2.7.7 (William Yang)
231af53 PHOENIX-2905 hadoop-2.5.1 artifacts are in the dependency tree
2e6714c PHOENIX-2878 CURRENT_TIME fails to provide correct time when projected table is using
559a783 PHOENIX-2871 Workaround sqlline issue
14a9c9f PHOENIX-2856 HBaseManagedTimeTableReuseTest category isn't getting run
1fd5fd2 PHOENIX-2828 Ordinality should be 1-based in UNNEST WITH ORDINALITY
d7abfa7 PHOENIX-2820 Investigate why SortMergeJoinIT has a sort in the explain plan
09f467e PHOENIX-2758 Ordered GROUP BY not occurring with leading PK equality expression
b712ec4 PHOENIX-2803 Initializing ToCharFunction with the List<Expression> constructor fails
b47f414 PHOENIX-2748 Disable auto-commit during bulk load
7778eea PHOENIX-3021 Using local index during compaction is producing NPE
300d205 PHOENIX-3136 Do not relocate org.apache.calcite in queryserver/thin-client
a762402 PHOENIX-3149 Local index got corrupted if intermediate compaction happen during the split.
e93d629 BUG-63793 Phoenix test is failing with Invalid index state transition
f733e86 PHOENIX-3152 Incorrect comparator in QueryOptimizer may cause IllegalArgumentException
a6ff352 PHOENIX-32451 Support both DATE and TIMESTAMP in CONVERT_TZ()
daac75d PHOENIX-3756 Handle users lacking ADMIN for the SYSTEM namespace
334a5cf PHOENIX-3710 Cannot use lowername data table name with indextool
8e33906 PHOENIX-3833 Handle users lacking ADMIN from failing in system schema creation
8369af1 PHOENIX-3843 Improve logging for UNION ALL errors
2221499 PHOENIX-3759 Dropping all local index causes NPE during compaction
68f56a6 PHOENIX-3842 Turn off all BloomFilter for Phoenix tables (Lars Hofhansl)
ef9a1fb PHOENIX-3800 NPE when doing UPSERT SELECT into salted tables
3cc7ee3 PHOENIX-3891 Compare current user to JDBC url principal with optional realm

b375c1f84 PHOENIX-4010 Hash Join cache may not be send to all regionservers when we have stale HBase meta cache(tests addendum)
4d162cf51 PHOENIX-3481 Phoenix initialization fails for HBase 0.98.21 and beyond
b4ec53eec PHOENIX-3342 ORDER BY and LIMIT+OFFSET doesnt work on second column from compound key
3c4bac452 PHOENIX-4018 HashJoin may produce nulls for LHS table columns(Sergey Soldatov)
29b912944 PHOENIX-3960 PhoenixStorageHandler for Hive doesn't work from Spark jobs
f1061d557 PHOENIX-4010 Hash Join cache may not be send to all regionservers when we have stale HBase meta cache
b41b6bf1c PHOENIX-3333 Support Spark 2.0
b9890d0cd PHOENIX-4042 Add hadoop metrics2-based Indexer coproc metrics
0ebaed78a PHOENIX-3598 Implement HTTP parameter impersonation for PQS
533aec7f8 PHOENIX-3994 Index RPC priority still depends on the controller factory property in hbase-site.xml (Samarth Jain <samarth@apache.org>)
562af6677 PHOENIX-3633 null pointer exception when subsquery for not exists returns empty result set (Jerry He)
e356f2795 BUG-80747 Sundry improvements around server-side secondary indexing
d091ecf7d PHOENIX-3895 Upgrade to Apache Avatica 1.10.0
3dee97b73 PHOENIX-3797 Address issue with compacting local index stores

** Changes in HDP-2.6.3

PHOENIX-2236 Various phoenix-spark fixes (Kalyan Hadoop)
PHOENIX-2290 Various phoenix-spark fixes (Kalyan Hadoop)
PHOENIX-2547 Various phoenix-spark fixes (Kalyan Hadoop)
PHOENIX-3101 Remove findbugs' annotations dependency as it is lgpl
PHOENIX-3406 CSV BulkLoad MR job incorrectly handle ROW_TIMESTAMP
PHOENIX-3427 phoenix-spark: Table undefined for tenant specific view (Nico Pappagianis)
PHOENIX-3525 Follow-on improvements to automatic index rebuilds- It contains PHOENIX-3525,PHOENIX-4099(Rajeshbabu)
PHOENIX-3532 Pass tenantId parameter to PhoenixRDD when reading (Nico Pappagianis)
PHOENIX-3600 Core MapReduce classes don't provide location info
PHOENIX-3601 PhoenixRDD doesn't expose the preferred node locations to Spark
PHOENIX-3792 Provide way to skip normalization of column names in phoenix-spark integration
PHOENIX-3797 Address issue with compacting local index stores
PHOENIX-3832 Local Index - Empty resultset for multi-tenant tables
PHOENIX-3858 Index maintenance not required for local indexes of table with immutable rows(Rajeshbabu)
PHOENIX-3947 Increase scan time out for partial index rebuild and retry only once(Samarth Jain)
PHOENIX-3948 Enable shorter time outs for server-side index writes(Vincent)
PHOENIX-3964 Index.preWALRestore should handle index write failure (chenglei)
PHOENIX-3986 UngroupedAggregateRegionObserver.commitBatch() should set the index metadata as an attribute on every mutation(Thomas)
PHOENIX-3997 UngroupedAggregateRegionObserver.commitBatchWithHTable() should not check the memstore size and wait for flush. (Geoffrey Jacoby)
PHOENIX-4027 Mark index as disabled during partial rebuild after configurable amount of time(Samarth Jain) Modification: we will never completely disable the index to avoid user to rebuild it from scratch.
PHOENIX-4039 Increase default number of RPC retries for our index rebuild task(Samarth Jain)
PHOENIX-4099 Follow-on improvements to automatic index rebuilds- It contains PHOENIX-3525,PHOENIX-4099(Rajeshbabu)
PHOENIX-4188 Disable inline-DTDs in Pherf XML records
PHOENIX-4189 Introduce a class that wraps the Map of primary key data
PHOENIX-4191 Categorize uncategorized integration tests
PHOENIX-4198 Remove need for users to have write permission to SYSTEM.CATALOG table
PHOENIX-4224 Automatic resending cache for HashJoin doesn't work when cache has expired on server side
PHOENIX-4225 Using Google cache may lead to lock up on RS side.
PHOENIX-4261 Remove unused netty-all dependency

